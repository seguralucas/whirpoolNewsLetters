package whirlpool.newsletter.entidades;

import javax.ws.rs.core.Response;

import whirlpool.newsletter.WritterHelper;
import whirlpool.newsletter.configuracion.Propiedades;

public class NewsLettersDao {

	public Respuesta crearYSubirCSV(){
		Respuesta respuesta = new Respuesta();
		try{
			Propiedades p= new Propiedades();
			WritterHelper.getInstance().escribirCSVJobs(p.getPathSalidaTomcat()+"/"+p.getOutputFile(), newsLetters);
			p.getSftpPropiedades().transferirFichero(p.getPathSalidaTomcat()+"/"+p.getOutputFile(), p.getOutputPathSFTP()+"/"+p.getOutputFile());				
			respuesta.setProcesoCorrecto(true);
			return Response.status(201).entity(respuesta.toString()+requestContex.getRemoteAddr()).build();
		}
		catch(Exception e){
			respuesta.setProcesoCorrecto(false);
			return Response.status(400).entity(respuesta.toString()+requestContex.getRemoteAddr()).build();
		}
	}
}
